<div id="pfbd" class="pf w0 h0" data-page-no="bd"><div class="pc pcbd w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgbd.png"/><div class="t m0 x3 h7 y49 ff2 fs5 fc0 sc0 ls0 ws0"><span class="_ _67"> </span><span class="_ _10"> </span><span class="_ _0"></span><span class="_ _4"></span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _d0"> </span><span class="ff5">177</span></div><div class="t m0 x2 h3 y4a ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _6"> </span><span class="ff6 fsa">getc<span class="_ _1"> </span></span><span class="_ _1"> </span><span class="_ _5"></span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _4"></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _d"></span><span class="_ _6"> </span></div><div class="t m0 x3 h3 y73 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _8"></span><span class="_ _71"> </span><span class="_ _4"></span><span class="_ _9"> </span><span class="_ _0"></span><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _9"> </span><span class="ff6 fsa">#define<span class="_ _9"> </span></span><span class="_ _9"> </span><span class="_ _4"></span><span class="_ _9"> </span><span class="_ _9"> </span><span class="_ _9"> </span></div><div class="t m0 x3 h3 ya6 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _f"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _0"></span><span class="_ _0"></span><span class="_ _4"></span><span class="_ _7"> </span><span class="_ _0"></span><span class="_ _4"></span><span class="_ _d"></span><span class="_ _7"> </span><span class="ff6 fsa">getc<span class="_ _e"> </span></span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="ff6 fsa">_fillbuf</span></div><div class="t m0 x3 h3 ya7 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _7"> </span><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _0"></span><span class="_ _d"></span><span class="_ _c"> </span><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _7"> </span><span class="_ _4"></span><span class="_ _9"> </span><span class="_ _9"> </span><span class="_ _7"> </span><span class="_ _7"> </span></div><div class="t m0 x3 h3 ya8 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _8"></span><span class="_ _9"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="ff6 fsa">unsigned</span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _2"> </span></div><div class="t m0 x3 h3 ya9 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _8"></span></div><div class="t m0 x2 h3 y14be ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _6"> </span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _4"></span><span class="_ _6"> </span><span class="_ _8"></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _d"></span><span class="_ _6"> </span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _6"> </span></div><div class="t m0 x3 h3 y14bf ff6 fsa fc0 sc0 ls0 ws0">putc<span class="_ _6"> </span><span class="ff2 fs1"><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _4"></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="ff6 fsa">getc</span><span class="_ _2"> </span><span class="_ _6"> </span><span class="_ _2"> </span></span></div><div class="t m0 x3 h3 y14c0 ff6 fsa fc0 sc0 ls0 ws0">_flushbuf<span class="_ _3"> </span><span class="ff2 fs1"><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _11"> </span><span class="_ _8"></span><span class="_ _3"> </span><span class="_ _8"></span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _4"></span><span class="_ _e"> </span><span class="_ _4"></span><span class="_ _3"> </span></span></div><div class="t m0 x3 h3 y14c1 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _4"></span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _0"></span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _4"></span></div><div class="t m0 x2 h3 y14c2 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _2"> </span><span class="ff6 fsa">fopen<span class="_ _3"> </span></span><span class="_ _2"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_"> </span><span class="_ _6"> </span><span class="_ _9"> </span><span class="ff6 fsa">fopen<span class="_ _2"> </span></span><span class="_ _2"> </span><span class="_ _3"> </span></div><div class="t m0 x3 h3 y14c3 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _9"> </span><span class="_ _7"> </span><span class="_ _7"> </span><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _4"></span><span class="_ _9"> </span><span class="_ _9"> </span><span class="_ _7"> </span><span class="_ _9"> </span></div><div class="t m0 x3 h3 y14c4 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _6"> </span><span class="_ _3"> </span><span class="_ _0"></span><span class="_ _2"> </span><span class="_ _0"></span><span class="_ _8"></span><span class="_"> </span><span class="ff6 fsa">fopen<span class="_ _6"> </span></span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _0"></span><span class="_ _2"> </span><span class="_ _4"></span><span class="_ _3"> </span><span class="_ _6"> </span><span class="_ _3"> </span></div><div class="t m0 x3 h3 y14c5 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _6"> </span><span class="ff6 fsa">_fillbuf<span class="_ _2"> </span></span><span class="_ _6"> </span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span></div><div class="t m0 x1d h11 y14c6 ff6 fsa fc0 sc0 ls0 ws0">#include<span class="_"> </span>&lt;fcntl.h&gt;</div><div class="t m0 x1d h11 y14c7 ff6 fsa fc0 sc0 ls0 ws0">#include<span class="_"> </span>&quot;syscalls.h&quot;</div><div class="t m0 x1d h11 y14c8 ff6 fsa fc0 sc0 ls0 ws0">#define<span class="_"> </span>PERMS<span class="_"> </span>0666<span class="_ _7f"> </span>/*<span class="_"> </span>RW<span class="_"> </span>for<span class="_"> </span>owner,<span class="_"> </span>group,<span class="_"> </span>others<span class="_"> </span>*/</div><div class="t m0 x1d h11 y14c9 ff6 fsa fc0 sc0 ls0 ws0">/*<span class="_"> </span>fopen:<span class="_ _1a"> </span>open<span class="_"> </span>file,<span class="_"> </span>return<span class="_"> </span>file<span class="_"> </span>ptr<span class="_"> </span>*/</div><div class="t m0 x1d h11 y14ca ff6 fsa fc0 sc0 ls0 ws0">FILE<span class="_"> </span>*fopen(char<span class="_"> </span>*name,<span class="_"> </span>char<span class="_"> </span>*mode)</div><div class="t m0 x1d h11 y14cb ff6 fsa fc0 sc0 ls0 ws0">{</div><div class="t m0 x1f h11 y14cc ff6 fsa fc0 sc0 ls0 ws0">int<span class="_"> </span>fd;</div><div class="t m0 x1f h11 y14cd ff6 fsa fc0 sc0 ls0 ws0">FILE<span class="_"> </span>*fp;</div><div class="t m0 x1f h11 y14ce ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(*mode<span class="_"> </span>!=<span class="_"> </span>&apos;r&apos;<span class="_"> </span>&amp;&amp;<span class="_"> </span>*mode<span class="_"> </span>!=<span class="_"> </span>&apos;w&apos;<span class="_"> </span>&amp;&amp;<span class="_"> </span>*mode<span class="_"> </span>!=<span class="_"> </span>&apos;a&apos;)</div><div class="t m0 x26 h11 y14cf ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>NULL;</div><div class="t m0 x1f h11 y14d0 ff6 fsa fc0 sc0 ls0 ws0">for<span class="_"> </span>(fp<span class="_"> </span>=<span class="_"> </span>_iob;<span class="_"> </span>fp<span class="_"> </span>&lt;<span class="_"> </span>_iob<span class="_"> </span>+<span class="_"> </span>OPEN_MAX;<span class="_"> </span>fp++)</div><div class="t m0 x26 h11 y14d1 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>((fp-&gt;flag<span class="_"> </span>&amp;<span class="_"> </span>(_READ<span class="_"> </span>|<span class="_"> </span>_WRITE))<span class="_"> </span>==<span class="_"> </span>0)</div><div class="t m0 x2f h11 y14d2 ff6 fsa fc0 sc0 ls0 ws0">break;<span class="_ _98"> </span>/*<span class="_"> </span>found<span class="_"> </span>free<span class="_"> </span>slot<span class="_"> </span>*/</div><div class="t m0 x1f h11 y14d3 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(fp<span class="_"> </span>&gt;=<span class="_"> </span>_iob<span class="_"> </span>+<span class="_"> </span>OPEN_MAX)<span class="_ _7e"> </span>/*<span class="_"> </span>no<span class="_"> </span>free<span class="_"> </span>slots<span class="_"> </span>*/</div><div class="t m0 x26 h11 y14d4 ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>NULL;</div><div class="t m0 x1f h11 y14d5 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(*mode<span class="_"> </span>==<span class="_"> </span>&apos;w&apos;)</div><div class="t m0 x26 h11 y14d6 ff6 fsa fc0 sc0 ls0 ws0">fd<span class="_"> </span>=<span class="_"> </span>creat(name,<span class="_"> </span>PERMS);</div><div class="t m0 x1f h11 y14d7 ff6 fsa fc0 sc0 ls0 ws0">else<span class="_"> </span>if<span class="_"> </span>(*mode<span class="_"> </span>==<span class="_"> </span>&apos;a&apos;)<span class="_"> </span>{</div><div class="t m0 x26 h11 y14d8 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>((fd<span class="_"> </span>=<span class="_"> </span>open(name,<span class="_"> </span>O_WRONLY,<span class="_"> </span>0))<span class="_"> </span>==<span class="_"> </span>-1)</div><div class="t m0 x2f h11 y14d9 ff6 fsa fc0 sc0 ls0 ws0">fd<span class="_"> </span>=<span class="_"> </span>creat(name,<span class="_"> </span>PERMS);</div><div class="t m0 x26 h11 y14da ff6 fsa fc0 sc0 ls0 ws0">lseek(fd,<span class="_"> </span>0L,<span class="_"> </span>2);</div><div class="t m0 x1f h11 y14db ff6 fsa fc0 sc0 ls0 ws0">}<span class="_"> </span>else</div><div class="t m0 x26 h11 y14dc ff6 fsa fc0 sc0 ls0 ws0">fd<span class="_"> </span>=<span class="_"> </span>open(name,<span class="_"> </span>O_RDONLY,<span class="_"> </span>0);</div><div class="t m0 x1f h11 y14dd ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(fd<span class="_"> </span>==<span class="_"> </span>-1)<span class="_ _b1"> </span>/*<span class="_"> </span>couldn&apos;t<span class="_"> </span>access<span class="_"> </span>name<span class="_"> </span>*/</div><div class="t m0 x26 h11 y14de ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>NULL;</div><div class="t m0 x1f h11 y14df ff6 fsa fc0 sc0 ls0 ws0">fp-&gt;fd<span class="_"> </span>=<span class="_"> </span>fd;</div><div class="t m0 x1f h11 y14e0 ff6 fsa fc0 sc0 ls0 ws0">fp-&gt;cnt<span class="_"> </span>=<span class="_"> </span>0;</div><div class="t m0 x1f h11 y14e1 ff6 fsa fc0 sc0 ls0 ws0">fp-&gt;base<span class="_"> </span>=<span class="_"> </span>NULL;</div><div class="t m0 x1f h11 y14e2 ff6 fsa fc0 sc0 ls0 ws0">fp-&gt;flag<span class="_"> </span>=<span class="_"> </span>(*mode<span class="_"> </span>==<span class="_"> </span>&apos;r&apos;)<span class="_"> </span>?<span class="_"> </span>_READ<span class="_"> </span>:<span class="_"> </span>_WRITE;</div><div class="t m0 x1f h11 y14e3 ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>fp;</div><div class="t m0 x1d h11 y14e4 ff6 fsa fc0 sc0 ls0 ws0">}</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
