<div id="pfc4" class="pf w0 h0" data-page-no="c4"><div class="pc pcc4 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgc4.png"/><div class="t m0 x3 h7 y49 ff5 fs5 fc0 sc0 ls0 ws0">184<span class="_ _65"> </span><span class="ff2"><span class="_ _1"> </span><span class="_ _67"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _0"></span><span class="_ _1"> </span><span class="_ _8"></span><span class="_ _4"></span></span></div><div class="t m0 x1d h11 y4a ff6 fsa fc0 sc0 ls0 ws0">/*<span class="_"> </span>closedir:<span class="_ _1a"> </span>close<span class="_"> </span>directory<span class="_"> </span>opened<span class="_"> </span>by<span class="_"> </span>opendir<span class="_"> </span>*/</div><div class="t m0 x1d h11 y243 ff6 fsa fc0 sc0 ls0 ws0">void<span class="_"> </span>closedir(DIR<span class="_"> </span>*dp)</div><div class="t m0 x1d h11 y1a3 ff6 fsa fc0 sc0 ls0 ws0">{</div><div class="t m0 x1f h11 y1a4 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(dp)<span class="_"> </span>{</div><div class="t m0 x26 h11 y1a5 ff6 fsa fc0 sc0 ls0 ws0">close(dp-&gt;fd);</div><div class="t m0 x26 h11 y1a6 ff6 fsa fc0 sc0 ls0 ws0">free(dp);</div><div class="t m0 x1f h11 y1a7 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x1d h11 y1a8 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x2 h3 y15aa ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _d"></span><span class="_ _2"> </span><span class="ff6 fsa">readdir<span class="_ _2"> </span></span><span class="_ _2"> </span><span class="ff6 fsa">read<span class="_ _2"> </span></span><span class="_ _3"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _d"></span><span class="_ _9"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span></div><div class="t m0 x3 h3 y15ab ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _0"></span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _0"></span><span class="_ _3"> </span></div><div class="t m0 x3 h3 y15ac ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _8"></span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_"> </span><span class="_ _8"></span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _0"></span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _2"> </span></div><div class="t m0 x3 h3 y15ad ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="ff6 fsa">static<span class="_ _6"> </span></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _4"></span><span class="_ _7"> </span></div><div class="t m0 x3 h3 y15ae ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _6"> </span><span class="_ _4"></span></div><div class="t m0 x1d h11 y15af ff6 fsa fc0 sc0 ls0 ws0">#include<span class="_"> </span>&lt;sys/dir.h&gt;<span class="_ _7e"> </span>/*<span class="_"> </span>local<span class="_"> </span>directory<span class="_"> </span>structure<span class="_"> </span>*/</div><div class="t m0 x1d h11 y15b0 ff6 fsa fc0 sc0 ls0 ws0">/*<span class="_"> </span>readdir:<span class="_ _1a"> </span>read<span class="_"> </span>directory<span class="_"> </span>entries<span class="_"> </span>in<span class="_"> </span>sequence<span class="_"> </span>*/</div><div class="t m0 x1d h11 y15b1 ff6 fsa fc0 sc0 ls0 ws0">Dirent<span class="_"> </span>*readdir(DIR<span class="_"> </span>*dp)</div><div class="t m0 x1d h11 y15b2 ff6 fsa fc0 sc0 ls0 ws0">{</div><div class="t m0 x1f h11 y15b3 ff6 fsa fc0 sc0 ls0 ws0">struct<span class="_"> </span>direct<span class="_"> </span>dirbuf;<span class="_"> </span>/*<span class="_"> </span>local<span class="_"> </span>directory<span class="_"> </span>structure<span class="_"> </span>*/</div><div class="t m0 x1f h11 y15b4 ff6 fsa fc0 sc0 ls0 ws0">static<span class="_"> </span>Dirent<span class="_"> </span>d;<span class="_ _77"> </span>/*<span class="_"> </span>return:<span class="_"> </span>portable<span class="_"> </span>structure<span class="_"> </span>*/</div><div class="t m0 x1f h11 y15b5 ff6 fsa fc0 sc0 ls0 ws0">while<span class="_"> </span>(read(dp-&gt;fd,<span class="_"> </span>(char<span class="_"> </span>*)<span class="_"> </span>&amp;dirbuf,<span class="_"> </span>sizeof(dirbuf))</div><div class="t m0 x2f h11 y15b6 ff6 fsa fc0 sc0 ls0 ws0">==<span class="_"> </span>sizeof(dirbuf))<span class="_"> </span>{</div><div class="t m0 x26 h11 y15b7 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(dirbuf.d_ino<span class="_"> </span>==<span class="_"> </span>0)<span class="_ _7e"> </span>/*<span class="_"> </span>slot<span class="_"> </span>not<span class="_"> </span>in<span class="_"> </span>use<span class="_"> </span>*/</div><div class="t m0 x2f h11 y15b8 ff6 fsa fc0 sc0 ls0 ws0">continue;</div><div class="t m0 x26 h11 y15b9 ff6 fsa fc0 sc0 ls0 ws0">d.ino<span class="_"> </span>=<span class="_"> </span>dirbuf.d_ino;</div><div class="t m0 x26 h11 y15ba ff6 fsa fc0 sc0 ls0 ws0">strncpy(d.name,<span class="_"> </span>dirbuf.d_name,<span class="_"> </span>DIRSIZ);</div><div class="t m0 x26 h11 y15bb ff6 fsa fc0 sc0 ls0 ws0">d.name[DIRSIZ]<span class="_"> </span>=<span class="_"> </span>&apos;\0&apos;;<span class="_ _1a"> </span>/*<span class="_"> </span>ensure<span class="_"> </span>termination<span class="_"> </span>*/</div><div class="t m0 x26 h11 y15bc ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>&amp;d;</div><div class="t m0 x1f h11 y15bd ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x1f h11 y15be ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>NULL;</div><div class="t m0 x1d h11 y15bf ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x2 h3 y15c0 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _f"> </span><span class="_ _67"> </span><span class="ff6 fsa">fsize<span class="_ _f"> </span></span><span class="_ _4"></span><span class="_ _67"> </span><span class="_ _f"> </span><span class="_ _4"></span><span class="_ _f"> </span><span class="_ _24"> </span><span class="_ _f"> </span><span class="_ _67"> </span><span class="_ _67"> </span></div><div class="t m0 x3 h3 y15c1 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _4"></span><span class="_ _68"> </span><span class="_ _e"> </span><span class="_ _2"> </span><span class="_ _4"></span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _4"></span></div><div class="t m0 x3 h3 y15c2 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _e"> </span><span class="_ _0"></span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _4"></span><span class="_ _5"></span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _3"> </span><span class="_ _7"> </span><span class="_ _0"></span><span class="_ _e"> </span><span class="_ _24"> </span><span class="_ _d"></span></div><div class="t m0 x3 h3 y15c3 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _e"> </span><span class="_ _0"></span><span class="_ _0"></span><span class="_ _8"></span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _4"></span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _4"></span><span class="_ _5"></span><span class="_ _3"> </span></div><div class="t m0 x3 h3 y15c4 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _0"></span><span class="_ _68"> </span><span class="_ _67"> </span><span class="_ _0"></span><span class="_ _68"> </span><span class="_ _4"></span><span class="_ _f"> </span><span class="_ _68"> </span><span class="_ _0"></span><span class="_ _68"> </span><span class="_ _0"></span><span class="_ _0"></span><span class="_ _68"> </span><span class="_ _68"> </span><span class="_ _67"> </span><span class="_ _68"> </span><span class="_ _68"> </span></div><div class="t m0 x3 h3 y15c5 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _11"> </span><span class="_ _67"> </span><span class="_ _4"></span><span class="_ _68"> </span><span class="_ _68"> </span><span class="_ _8"></span><span class="_ _7a"> </span><span class="_ _68"> </span><span class="_ _68"> </span><span class="_ _4"></span><span class="_ _67"> </span><span class="_ _11"> </span></div><div class="t m0 x3 h3 y15c6 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _4"></span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _3"> </span></div><div class="t m0 x3 h3 y15c7 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _4"></span><span class="_ _4"></span><span class="_ _9"> </span><span class="_ _71"> </span><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _7"> </span><span class="_ _9"> </span><span class="_ _7"> </span></div><div class="t m0 x3 h3 y15c8 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _8"></span></div><div class="t m0 x3 h3 ya4 ff5 fs1 fc0 sc0 ls0 ws0">Ex<span class="_ _4"></span>ercise<span class="_ _f"> </span>8-5<span class="ff2"><span class="_ _74"> </span><span class="_ _f"> </span><span class="_ _f"> </span><span class="ff6 fsa">fsize<span class="_ _f"> </span></span><span class="_ _4"></span><span class="_ _f"> </span><span class="_ _67"> </span><span class="_ _f"> </span><span class="_ _f"> </span><span class="_ _f"> </span><span class="_ _4"></span><span class="_ _5"></span></span></div><div class="t m0 x3 h3 y185 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _d"></span><span class="_ _9"> </span><span class="ff7">□</span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
