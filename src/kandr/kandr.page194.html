<div id="pfc2" class="pf w0 h0" data-page-no="c2"><div class="pc pcc2 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgc2.png"/><div class="t m0 x3 h7 y49 ff5 fs5 fc0 sc0 ls0 ws0">182<span class="_ _65"> </span><span class="ff2"><span class="_ _1"> </span><span class="_ _67"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _0"></span><span class="_ _1"> </span><span class="_ _8"></span><span class="_ _4"></span></span></div><div class="t m0 x1d h11 y4a ff6 fsa fc0 sc0 ls0 ws0">int<span class="_"> </span>stat(char<span class="_"> </span>*,<span class="_"> </span>struct<span class="_"> </span>stat<span class="_"> </span>*);</div><div class="t m0 x1d h11 y243 ff6 fsa fc0 sc0 ls0 ws0">void<span class="_"> </span>dirwalk(char<span class="_"> </span>*,<span class="_"> </span>void<span class="_"> </span>(*fcn)(char<span class="_"> </span>*));</div><div class="t m0 x1d h11 y1a4 ff6 fsa fc0 sc0 ls0 ws0">/*<span class="_"> </span>fsize:<span class="_ _1a"> </span>print<span class="_"> </span>size<span class="_"> </span>of<span class="_"> </span>file<span class="_"> </span>&quot;name&quot;<span class="_"> </span>*/</div><div class="t m0 x1d h11 y1a5 ff6 fsa fc0 sc0 ls0 ws0">void<span class="_"> </span>fsize(char<span class="_"> </span>*name)</div><div class="t m0 x1d h11 y1a6 ff6 fsa fc0 sc0 ls0 ws0">{</div><div class="t m0 x1f h11 y1a7 ff6 fsa fc0 sc0 ls0 ws0">struct<span class="_"> </span>stat<span class="_"> </span>stbuf;</div><div class="t m0 x1f h11 y278 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(stat(name,<span class="_"> </span>&amp;stbuf)<span class="_"> </span>==<span class="_"> </span>-1)<span class="_"> </span>{</div><div class="t m0 x26 h11 y1c6 ff6 fsa fc0 sc0 ls0 ws0">fprintf(stderr,<span class="_"> </span>&quot;fsize:<span class="_"> </span>can&apos;t<span class="_"> </span>access<span class="_"> </span>%s\n&quot;,<span class="_"> </span>name);</div><div class="t m0 x26 h11 y1c7 ff6 fsa fc0 sc0 ls0 ws0">return;</div><div class="t m0 x1f h11 y1c8 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x1f h11 y279 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>((stbuf.st_mode<span class="_"> </span>&amp;<span class="_"> </span>S_IFMT)<span class="_"> </span>==<span class="_"> </span>S_IFDIR)</div><div class="t m0 x26 h11 y1c9 ff6 fsa fc0 sc0 ls0 ws0">dirwalk(name,<span class="_"> </span>fsize);</div><div class="t m0 x1f h11 y1ca ff6 fsa fc0 sc0 ls0 ws0">printf(&quot;%8ld<span class="_"> </span>%s\n&quot;,<span class="_"> </span>stbuf.st_size,<span class="_"> </span>name);</div><div class="t m0 x1d h11 y1cb ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x2 h3 y156b ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _e"> </span><span class="_ _e"> </span><span class="ff6 fsa">dirwalk<span class="_ _e"> </span></span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _0"></span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _e"> </span></div><div class="t m0 x3 h3 y156c ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _d"></span><span class="_ _f"> </span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _d"></span><span class="_ _9"> </span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _7"> </span></div><div class="t m0 x3 h3 y156d ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _8"></span><span class="_ _67"> </span><span class="_ _e"> </span><span class="ff6 fsa">fsize<span class="_ _3"> </span></span></div><div class="t m0 x3 h3 y156e ff6 fsa fc0 sc0 ls0 ws0">dirwalk<span class="_ _2"> </span><span class="ff2 fs1"><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _d"></span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _4"></span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _4"></span><span class="_ _70"></span></span></div><div class="t m0 x22 h11 y156f ff6 fsa fc0 sc0 ls0 ws0">#define<span class="_"> </span>MAX_PATH<span class="_"> </span>1024</div><div class="t m0 x22 h11 y1570 ff6 fsa fc0 sc0 ls0 ws0">/*<span class="_"> </span>dirwalk:<span class="_ _1a"> </span>apply<span class="_"> </span>fcn<span class="_"> </span>to<span class="_"> </span>all<span class="_"> </span>files<span class="_"> </span>in<span class="_"> </span>dir<span class="_"> </span>*/</div><div class="t m0 x22 h11 y1571 ff6 fsa fc0 sc0 ls0 ws0">void<span class="_"> </span>dirwalk(char<span class="_"> </span>*dir,<span class="_"> </span>void<span class="_"> </span>(*fcn)(char<span class="_"> </span>*))</div><div class="t m0 x22 h11 y1572 ff6 fsa fc0 sc0 ls0 ws0">{</div><div class="t m0 x2c h11 y1573 ff6 fsa fc0 sc0 ls0 ws0">char<span class="_"> </span>name[MAX_PATH];</div><div class="t m0 x2c h11 y1574 ff6 fsa fc0 sc0 ls0 ws0">Dirent<span class="_"> </span>*dp;</div><div class="t m0 x2c h11 y1575 ff6 fsa fc0 sc0 ls0 ws0">DIR<span class="_"> </span>*dfd;</div><div class="t m0 x2c h11 y1576 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>((dfd<span class="_"> </span>=<span class="_"> </span>opendir(dir))<span class="_"> </span>==<span class="_"> </span>NULL)<span class="_"> </span>{</div><div class="t m0 x3b h11 y1577 ff6 fsa fc0 sc0 ls0 ws0">fprintf(stderr,<span class="_"> </span>&quot;dirwalk:<span class="_"> </span>can&apos;t<span class="_"> </span>open<span class="_"> </span>%s\n&quot;,<span class="_"> </span>dir);</div><div class="t m0 x3b h11 y1578 ff6 fsa fc0 sc0 ls0 ws0">return;</div><div class="t m0 x2c h11 y1579 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x2c h11 y157a ff6 fsa fc0 sc0 ls0 ws0">while<span class="_"> </span>((dp<span class="_"> </span>=<span class="_"> </span>readdir(dfd))<span class="_"> </span>!=<span class="_"> </span>NULL)<span class="_"> </span>{</div><div class="t m0 x3b h11 y157b ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(strcmp(dp-&gt;name,<span class="_"> </span>&quot;.&quot;)<span class="_"> </span>==<span class="_"> </span>0</div><div class="t m0 x11 h11 y157c ff6 fsa fc0 sc0 ls0 ws0">||<span class="_"> </span>strcmp(dp-&gt;name,<span class="_"> </span>&quot;..&quot;)<span class="_"> </span>==<span class="_"> </span>0)</div><div class="t m0 x3c h11 y157d ff6 fsa fc0 sc0 ls0 ws0">continue;<span class="_ _7f"> </span>/*<span class="_"> </span>skip<span class="_"> </span>self<span class="_"> </span>and<span class="_"> </span>parent<span class="_"> </span>*/</div><div class="t m0 x3b h11 y157e ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(strlen(dir)+strlen(dp-&gt;name)+2<span class="_"> </span>&gt;<span class="_"> </span>sizeof(name))</div><div class="t m0 x3c h11 y157f ff6 fsa fc0 sc0 ls0 ws0">fprintf(stderr,<span class="_"> </span>&quot;dirwalk:<span class="_"> </span>name<span class="_"> </span>%s/%s<span class="_"> </span>too</div><div class="t m0 x6a h11 y1580 ff6 fsa fc0 sc0 ls0 ws0">long\n&quot;,</div><div class="t m0 x42 h11 y1581 ff6 fsa fc0 sc0 ls0 ws0">dir,<span class="_"> </span>dp-&gt;name);</div><div class="t m0 x3b h11 y1582 ff6 fsa fc0 sc0 ls0 ws0">else<span class="_"> </span>{</div><div class="t m0 x3c h11 y1583 ff6 fsa fc0 sc0 ls0 ws0">sprintf(name,<span class="_"> </span>&quot;%s/%s&quot;,<span class="_"> </span>dir,<span class="_"> </span>dp-&gt;name);</div><div class="t m0 x3c h11 y1584 ff6 fsa fc0 sc0 ls0 ws0">(*fcn)(name);</div><div class="t m0 x3b h11 y1585 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x2c h11 y1586 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x2c h11 y1587 ff6 fsa fc0 sc0 ls0 ws0">closedir(dfd);</div><div class="t m0 x22 h11 y1588 ff6 fsa fc0 sc0 ls0 ws0">}</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
