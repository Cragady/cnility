<div id="pf9d" class="pf w0 h0" data-page-no="9d"><div class="pc pc9d w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg9d.png"/><div class="t m0 x3 h7 y49 ff2 fs5 fc0 sc0 ls0 ws0"><span class="_ _67"> </span><span class="_ _8"></span><span class="_ _1"> </span><span class="_ _be"> </span><span class="ff5">145</span></div><div class="t m0 x1d h11 y4a ff6 fsa fc0 sc0 ls0 ws0">/*<span class="_"> </span>lookup:<span class="_ _1a"> </span>look<span class="_"> </span>for<span class="_"> </span>s<span class="_"> </span>in<span class="_"> </span>hashtab<span class="_"> </span>*/</div><div class="t m0 x1d h11 y243 ff6 fsa fc0 sc0 ls0 ws0">struct<span class="_"> </span>nlist<span class="_"> </span>*lookup(char<span class="_"> </span>*s)</div><div class="t m0 x1d h11 y1a3 ff6 fsa fc0 sc0 ls0 ws0">{</div><div class="t m0 x1f h11 y1a4 ff6 fsa fc0 sc0 ls0 ws0">struct<span class="_"> </span>nlist<span class="_"> </span>*np;</div><div class="t m0 x1f h11 y1a6 ff6 fsa fc0 sc0 ls0 ws0">for<span class="_"> </span>(np<span class="_"> </span>=<span class="_"> </span>hashtab[hash(s)];<span class="_"> </span>np<span class="_"> </span>!=<span class="_"> </span>NULL;<span class="_"> </span>np<span class="_"> </span>=<span class="_"> </span>np-&gt;next)</div><div class="t m0 x26 h11 y1a7 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(strcmp(s,<span class="_"> </span>np-&gt;name)<span class="_"> </span>==<span class="_"> </span>0)</div><div class="t m0 x2f h11 y1a8 ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>np;<span class="_ _1a"> </span>/*<span class="_"> </span>found<span class="_"> </span>*/</div><div class="t m0 x1f h11 y278 ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>NULL;<span class="_ _98"> </span>/*<span class="_"> </span>not<span class="_"> </span>found<span class="_"> </span>*/</div><div class="t m0 x1d h11 y1c6 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x3 h3 y1106 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="ff6 fsa">for<span class="_ _2"> </span></span><span class="_ _2"> </span><span class="_ _2"> </span><span class="ff6 fsa">lookup<span class="_ _2"> </span></span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _0"></span><span class="_ _2"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _6"> </span></div><div class="t m0 x1d h11 y1107 ff6 fsa fc0 sc0 ls0 ws0">for<span class="_"> </span>(ptr<span class="_"> </span>=<span class="_"> </span>head;<span class="_"> </span>ptr<span class="_"> </span>!=<span class="_"> </span>NULL;<span class="_"> </span>ptr<span class="_"> </span>=<span class="_"> </span>ptr-&gt;next)</div><div class="t m0 x1f h10 y1108 ff3 fs1 fc0 sc0 ls0 ws0">...</div><div class="t m0 x2 h3 y1109 ff6 fsa fc0 sc0 ls0 ws0">install<span class="_ _3"> </span><span class="ff2 fs1"><span class="_ _e"> </span></span>lookup<span class="_ _3"> </span><span class="ff2 fs1"><span class="_ _e"> </span><span class="_ _5"></span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _e"> </span></span></div><div class="t m0 x3 h3 y110a ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _4"></span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _0"></span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _3"> </span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _8"></span><span class="_ _f"> </span><span class="_ _4"></span></div><div class="t m0 x3 h3 y110b ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _4"></span><span class="_ _7"> </span><span class="ff6 fsa">install<span class="_ _6"> </span></span><span class="_ _6"> </span><span class="ff6 fsa">NULL<span class="_ _6"> </span></span><span class="_ _6"> </span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _4"></span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _0"></span></div><div class="t m0 x3 h3 y110c ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _4"></span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _d"></span></div><div class="t m0 x22 h11 y110d ff6 fsa fc0 sc0 ls0 ws0">struct<span class="_"> </span>nlist<span class="_"> </span>*lookup(char<span class="_"> </span>*);</div><div class="t m0 x22 h11 y110e ff6 fsa fc0 sc0 ls0 ws0">char<span class="_"> </span>*strdup(char<span class="_"> </span>*);</div><div class="t m0 x22 h11 y110f ff6 fsa fc0 sc0 ls0 ws0">/*<span class="_"> </span>install:<span class="_ _1a"> </span>put<span class="_"> </span>(name,<span class="_"> </span>defn)<span class="_"> </span>in<span class="_"> </span>hashtab<span class="_"> </span>*/</div><div class="t m0 x22 h11 y1110 ff6 fsa fc0 sc0 ls0 ws0">struct<span class="_"> </span>nlist<span class="_"> </span>*install(char<span class="_"> </span>*name,<span class="_"> </span>char<span class="_"> </span>*defn)</div><div class="t m0 x22 h11 y1111 ff6 fsa fc0 sc0 ls0 ws0">{</div><div class="t m0 x2c h11 y1112 ff6 fsa fc0 sc0 ls0 ws0">struct<span class="_"> </span>nlist<span class="_"> </span>*np;</div><div class="t m0 x2c h11 y1113 ff6 fsa fc0 sc0 ls0 ws0">unsigned<span class="_"> </span>hashval;</div><div class="t m0 x2c h11 y1114 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>((np<span class="_"> </span>=<span class="_"> </span>lookup(name))<span class="_"> </span>==<span class="_"> </span>NULL)<span class="_"> </span>{<span class="_ _1a"> </span>/*<span class="_"> </span>not<span class="_"> </span>found<span class="_"> </span>*/</div><div class="t m0 x3b h11 y1115 ff6 fsa fc0 sc0 ls0 ws0">np<span class="_"> </span>=<span class="_"> </span>(struct<span class="_"> </span>nlist<span class="_"> </span>*)<span class="_"> </span>malloc(sizeof(*np));</div><div class="t m0 x3b h11 y1116 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(np<span class="_"> </span>==<span class="_"> </span>NULL<span class="_"> </span>||<span class="_"> </span>(np-&gt;name<span class="_"> </span>=<span class="_"> </span>strdup(name))<span class="_"> </span>==<span class="_"> </span>NULL)</div><div class="t m0 x3c h11 y1117 ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>NULL;</div><div class="t m0 x3b h11 y1118 ff6 fsa fc0 sc0 ls0 ws0">hashval<span class="_"> </span>=<span class="_"> </span>hash(name);</div><div class="t m0 x3b h11 y1119 ff6 fsa fc0 sc0 ls0 ws0">np-&gt;next<span class="_"> </span>=<span class="_"> </span>hashtab[hashval];</div><div class="t m0 x3b h11 y111a ff6 fsa fc0 sc0 ls0 ws0">hashtab[hashval]<span class="_"> </span>=<span class="_"> </span>np;</div><div class="t m0 x2c h11 y111b ff6 fsa fc0 sc0 ls0 ws0">}<span class="_"> </span>else<span class="_ _77"> </span>/*<span class="_"> </span>already<span class="_"> </span>there<span class="_"> </span>*/</div><div class="t m0 x3b h11 y111c ff6 fsa fc0 sc0 ls0 ws0">free((void<span class="_"> </span>*)<span class="_"> </span>np-&gt;defn);<span class="_ _1a"> </span>/*<span class="_"> </span>free<span class="_"> </span>previous<span class="_"> </span>defn<span class="_"> </span>*/</div><div class="t m0 x2c h11 y111d ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>((np-&gt;defn<span class="_"> </span>=<span class="_"> </span>strdup(defn))<span class="_"> </span>==<span class="_"> </span>NULL)</div><div class="t m0 x3b h11 y111e ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>NULL;</div><div class="t m0 x2c h11 y111f ff6 fsa fc0 sc0 ls0 ws0">return<span class="_"> </span>np;</div><div class="t m0 x22 h11 y1120 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x3 h3 y1121 ff5 fs1 fc0 sc0 ls0 ws0">Ex<span class="_ _4"></span>ercise<span class="_ _e"> </span>6-5<span class="ff2"><span class="_ _24"> </span><span class="_ _8"></span><span class="_ _7"> </span><span class="_ _7"> </span><span class="_ _e"> </span><span class="ff6 fsa">undef<span class="_ _7"> </span></span><span class="_ _3"> </span><span class="_ _7"> </span><span class="_ _4"></span><span class="_ _7"> </span><span class="_ _e"> </span><span class="_ _7"> </span><span class="_ _7"> </span></span></div><div class="t m0 x3 h3 y1122 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _4"></span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _4"></span><span class="_ _6"> </span><span class="_ _3"> </span><span class="_ _0"></span><span class="_ _2"> </span><span class="ff6 fsa">lookup<span class="_ _2"> </span></span><span class="_ _2"> </span><span class="ff6 fsa">install</span><span class="_ _9"> </span><span class="ff7">□</span></div><div class="t m0 x3 h3 ya4 ff5 fs1 fc0 sc0 ls0 ws0">Ex<span class="_ _4"></span>ercise<span class="_ _6"> </span>6-6<span class="ff2"><span class="_ _9"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _6"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="ff6 fsa">#define<span class="_ _2"> </span></span><span class="_ _0"></span><span class="_ _6"> </span><span class="_ _4"></span><span class="_ _2"> </span><span class="_ _2"> </span></span></div><div class="t m0 x3 h3 y185 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _1"> </span><span class="_ _4"></span><span class="_ _1"> </span><span class="_ _4"></span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _4"></span><span class="_ _4"></span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _10"> </span><span class="_ _1"> </span><span class="_ _10"> </span><span class="_ _1"> </span><span class="_ _1"> </span></div><div class="t m0 x3 h3 y23 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _12"></span><span class="_ _3"> </span><span class="_ _4"></span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _3"> </span><span class="ff6 fsa">getch<span class="_ _2"> </span></span><span class="_ _2"> </span><span class="ff6 fsa">ungetch<span class="_ _2"> </span></span><span class="_ _9"> </span><span class="ff7">□</span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
