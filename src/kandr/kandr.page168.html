<div id="pfa8" class="pf w0 h0" data-page-no="a8"><div class="pc pca8 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bga8.png"/><div class="t m0 x3 h7 y49 ff5 fs5 fc0 sc0 ls0 ws0">156<span class="_ _c2"> </span><span class="ff2"><span class="_ _1"> </span><span class="_ _67"> </span><span class="_ _10"> </span><span class="_ _1"> </span></span></div><div class="t m0 x2 h3 y4a ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _6"> </span><span class="_ _6"> </span><span class="_ _3"> </span><span class="ff6 fsa">va_arg<span class="_ _6"> </span></span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="ff6 fsa">ap<span class="_ _6"> </span></span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _6"> </span><span class="ff6 fsa">va_arg</span></div><div class="t m0 x3 h3 y73 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _5"></span><span class="_ _2"> </span><span class="_ _0"></span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _8"></span></div><div class="t m0 x3 h3 ya6 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _0"></span><span class="_ _8"></span><span class="_ _1"> </span><span class="ff6 fsa">va_end<span class="_ _6"> </span></span><span class="_ _1"> </span><span class="_ _4"></span><span class="_ _0"></span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _d"></span><span class="_ _7"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _6"> </span><span class="_ _1"> </span><span class="_ _4"></span><span class="_ _1"> </span></div><div class="t m0 x3 h3 ya7 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _8"></span></div><div class="t m0 x2 h3 y1249 ff2 fs1 fc0 sc0 ls0 ws0"><span class="_ _2"> </span><span class="_ _0"></span><span class="_ _2"> </span><span class="_ _4"></span><span class="_ _5"></span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="_ _3"> </span><span class="_ _2"> </span><span class="_ _2"> </span><span class="ff6 fsa">printf</span></div><div class="t m0 x44 h11 y124a ff6 fsa fc0 sc0 ls0 ws0">#include<span class="_"> </span>&lt;stdarg.h&gt;</div><div class="t m0 x44 h11 y124b ff6 fsa fc0 sc0 ls0 ws0">/*<span class="_"> </span>minprintf:<span class="_ _1a"> </span>minimal<span class="_"> </span>printf<span class="_"> </span>with<span class="_"> </span>variable<span class="_"> </span>argument<span class="_"> </span>list<span class="_"> </span>*/</div><div class="t m0 x44 h11 y124c ff6 fsa fc0 sc0 ls0 ws0">void<span class="_"> </span>minprintf(char<span class="_"> </span>*fmt,<span class="_"> </span>...)</div><div class="t m0 x44 h11 y124d ff6 fsa fc0 sc0 ls0 ws0">{</div><div class="t m0 x1d h11 y124e ff6 fsa fc0 sc0 ls0 ws0">va_list<span class="_"> </span>ap;<span class="_ _7f"> </span>/*<span class="_"> </span>points<span class="_"> </span>to<span class="_"> </span>each<span class="_"> </span>unnamed<span class="_"> </span>arg<span class="_"> </span>in<span class="_"> </span>turn<span class="_"> </span>*/</div><div class="t m0 x1d h11 y124f ff6 fsa fc0 sc0 ls0 ws0">char<span class="_"> </span>*p,<span class="_"> </span>*sval;</div><div class="t m0 x1d h11 y1250 ff6 fsa fc0 sc0 ls0 ws0">int<span class="_"> </span>ival;</div><div class="t m0 x1d h11 y1251 ff6 fsa fc0 sc0 ls0 ws0">double<span class="_"> </span>dval;</div><div class="t m0 x1d h11 y1252 ff6 fsa fc0 sc0 ls0 ws0">va_start(ap,<span class="_"> </span>fmt);<span class="_"> </span>/*<span class="_"> </span>make<span class="_"> </span>ap<span class="_"> </span>point<span class="_"> </span>to<span class="_"> </span>1st<span class="_"> </span>unnamed<span class="_"> </span>arg<span class="_"> </span>*/</div><div class="t m0 x1d h11 y1253 ff6 fsa fc0 sc0 ls0 ws0">for<span class="_"> </span>(p<span class="_"> </span>=<span class="_"> </span>fmt;<span class="_"> </span>*p;<span class="_"> </span>p++)<span class="_"> </span>{</div><div class="t m0 x1f h11 y1254 ff6 fsa fc0 sc0 ls0 ws0">if<span class="_"> </span>(*p<span class="_"> </span>!=<span class="_"> </span>&apos;%&apos;)<span class="_"> </span>{</div><div class="t m0 x26 h11 y1255 ff6 fsa fc0 sc0 ls0 ws0">putchar(*p);</div><div class="t m0 x26 h11 y1256 ff6 fsa fc0 sc0 ls0 ws0">continue;</div><div class="t m0 x1f h11 y1257 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x1f h11 y1258 ff6 fsa fc0 sc0 ls0 ws0">switch<span class="_"> </span>(*++p)<span class="_"> </span>{</div><div class="t m0 x26 h11 y1259 ff6 fsa fc0 sc0 ls0 ws0">case<span class="_"> </span>&apos;d&apos;:</div><div class="t m0 x2f h11 y125a ff6 fsa fc0 sc0 ls0 ws0">ival<span class="_"> </span>=<span class="_"> </span>va_arg(ap,<span class="_"> </span>int);</div><div class="t m0 x2f h11 y125b ff6 fsa fc0 sc0 ls0 ws0">printf(&quot;%d&quot;,<span class="_"> </span>ival);</div><div class="t m0 x2f h11 y125c ff6 fsa fc0 sc0 ls0 ws0">break;</div><div class="t m0 x26 h11 y125d ff6 fsa fc0 sc0 ls0 ws0">case<span class="_"> </span>&apos;f&apos;:</div><div class="t m0 x2f h11 y125e ff6 fsa fc0 sc0 ls0 ws0">dval<span class="_"> </span>=<span class="_"> </span>va_arg(ap,<span class="_"> </span>double);</div><div class="t m0 x2f h11 y125f ff6 fsa fc0 sc0 ls0 ws0">printf(&quot;%f&quot;,<span class="_"> </span>dval);</div><div class="t m0 x2f h11 y1260 ff6 fsa fc0 sc0 ls0 ws0">break;</div><div class="t m0 x26 h11 y1261 ff6 fsa fc0 sc0 ls0 ws0">case<span class="_"> </span>&apos;s&apos;:</div><div class="t m0 x2f h11 y1262 ff6 fsa fc0 sc0 ls0 ws0">for<span class="_"> </span>(sval<span class="_"> </span>=<span class="_"> </span>va_arg(ap,<span class="_"> </span>char<span class="_"> </span>*);<span class="_"> </span>*sval;<span class="_"> </span>sval++)</div><div class="t m0 x5f h11 y1263 ff6 fsa fc0 sc0 ls0 ws0">putchar(*sval);</div><div class="t m0 x2f h11 y1264 ff6 fsa fc0 sc0 ls0 ws0">break;</div><div class="t m0 x26 h11 y1265 ff6 fsa fc0 sc0 ls0 ws0">default:</div><div class="t m0 x2f h11 y1266 ff6 fsa fc0 sc0 ls0 ws0">putchar(*p);</div><div class="t m0 x2f h11 y1267 ff6 fsa fc0 sc0 ls0 ws0">break;</div><div class="t m0 x1f h11 y1268 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x1d h11 y1269 ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x1d h11 y126a ff6 fsa fc0 sc0 ls0 ws0">va_end(ap);<span class="_ _7f"> </span>/*<span class="_"> </span>clean<span class="_"> </span>up<span class="_"> </span>when<span class="_"> </span>done<span class="_"> </span>*/</div><div class="t m0 x44 h11 y126b ff6 fsa fc0 sc0 ls0 ws0">}</div><div class="t m0 x3 h3 y185 ff5 fs1 fc0 sc0 ls0 ws0">Ex<span class="_ _4"></span>ercise<span class="_ _10"> </span>7-3<span class="_ _5"></span><span class="ff2"><span class="_ _e"> </span><span class="_ _4"></span><span class="_ _1"> </span><span class="ff6 fsa">minprintf<span class="_ _1"> </span></span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _10"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _1"> </span><span class="_ _3"> </span><span class="ff6 fsa">printf</span></span></div><div class="t m0 x3 h1a y23 ff7 fs1 fc0 sc0 ls0 ws0">□</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
